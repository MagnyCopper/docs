# MySQL <!-- omit in toc -->

> MySQL原本是一个开放源码的关联式资料库管理系统，原开发者为瑞典的MySQL AB公司，该公司于2008年被昇阳微系统（Sun Microsystems）收购。2009年，甲骨文公司（Oracle）收购昇阳微系统公司，MySQL成为Oracle旗下产品。

目录:

- [基础属性](#基础属性)
- [知识点](#知识点)
  - [索引](#索引)
    - [索引页(page)](#索引页page)
    - [InnoDB的索引](#innodb的索引)

## 基础属性



## 知识点

### 索引

索引的本质是一种被排过序的数据结构,类似于书籍的目录.依赖索引文件的少量I/O操作去获得真实完整数据的工具;

MySQL在早期尝试过多种索引的数据结构,如:二叉树/红黑树等,最终稳定在B+树和hash上;

**各种数据结构存储索引的优缺点:**

| 数据结构 | 说明                                                                                    |
| :------: | :-------------------------------------------------------------------------------------- |
|  二叉树  | 由于不支持自平衡,因此容易产生偏斜的树导致查询效率降低                                   |
|  红黑树  | 在二叉树的特性基础上支持自平衡,但容易产生树高较高的树,导致查询效率降低                  |
|   B树    | 在红黑树特性的基础上限制树高(通过每个树节点可以横向保存多个数据实现按顺序递增)          |
|   B+树   | 在B树的基础上添加一些其他特性如:仅在叶子节点保存数据;增加叶子节点间的指针优化范围查询等 |
|   hash   | 比B+树效率更高,但不支持范围查询且存在hash冲突的风险                                     |

**B+树**

![](./MySQL-img-1.png)

#### 索引页(page)

索引页既是B树的叶子节点的内容;

主要由以下部分构成:

- 目录页:用于保存分组的用户记录起始位置;
- 用户记录:保存行数据
- 通用页结构:描绘该页的一些基础信息;

![](./MySQL-img-3.png)

#### InnoDB的索引

1. InnoDB引擎的表最好必须设置主键且使用整型自增效果更佳(乱序插入将导致一些额外的B树平衡操作);
2. InnoDB引擎的表**有且仅有一个**聚簇索引树(有主键依赖主键建立,若无主键依赖行号建立);
3. InnoDB引擎的表中建立非主键索引是通过非聚簇索引树实现的,叶子节点保存了该数据的主键信息(通过主键再次查询主键树获取数据即**回表**操作);
4. 联合索引的所有索引列都出现在索引树上,并依次比较三列的大小,即只有在3个字段依次比较的情况下树节点才是有顺序的,这就是最左匹配原则的由来;
   ![](./MySQL-img-2.jpg)